JobName: Qemu Boot CentOS 
Runs: 1
RunInterval: 60s
TestDescriptors:
    -   TargetManagerName: TargetList
        TargetManagerAcquireParameters:
          Targets:
              - ID: "1234"
          MinNumberDevices: 1
          MaxNumberDevices: 1
        TargetManagerReleaseParameters:
        TestFetcherName: literal
        TestFetcherFetchParameters:
            TestName: Boot CentOS coreboot
            Steps:
                
                -   name: cmd
                    label: first power down
                    parameters:
                        executable: [sh]
                        args: ["-c", "./dutctl -s penguin.lab.9e.network power off"]
                        dir: ["/root/assets/fti/cmd/dutctl/"]
                        expect: ["Command finished: [power off]"]

                -   name: cmd
                    label: flashing
                    parameters:
                        executable: [sh]
                        args: ["-c", "./dutctl -s penguin.lab.9e.network flash write [[ .BinaryPath ]]"]
                        dir: ["/root/assets/fti/cmd/dutctl/"]
                        expect: ["Command finished: [flash write [[ .BinaryPath ]]"]
                      
                      
                -   name: cmd
                    label: power on
                    parameters:
                        executable: [sh]
                        args: ["-c", "./dutctl -s penguin.lab.9e.network power on"]
                        dir: ["/root/assets/fti/cmd/dutctl/"]
                        expect: ["Command finished: [power on]"]
                
                -   name: sleep
                    label: Sleep for 30s
                    parameters:
                        duration: [30s]

                -   name: cmd
                    label: retrieve log
                    parameters:
                        executable: [sh]
                        args: ["-c", "./dutctl -s penguin.lab.9e.network log > log"]
                        dir: ["/root/assets/fti/cmd/dutctl/"]

                -   name: cmd
                    label: grep serial file
                    parameters:
                        executable: [grep]
                        args: ["-a", "-E", "All threads complete.", "log"]
                        dir: ["/root/assets/fti/cmd/dutctl/"]
                        expect: ["All threads complete."]


Reporting:
    RunReporters:
        -   name: TargetSuccess
            parameters:
                SuccessExpression: "=100%"
