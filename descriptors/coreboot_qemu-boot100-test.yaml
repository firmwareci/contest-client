JobName: QEMU Boot Test
Runs: 1
RunInterval: 60s
Tags: ["coreboot", "qemu", "boot"]
TestDescriptors:
    -   TargetManagerName: TargetList
        TargetManagerAcquireParameters:
            Targets:
                - ID: "1234"
            Shuffle: true
            MinNumberDevices: 1
            MaxNumberDevices: 1
        TargetManagerReleaseParameters:
        TestFetcherName: literal
        TestFetcherFetchParameters:
            TestName: Build and Boot coreboot
            Steps:
                -   name: cmd
                    label: Cloning all assets
                    parameters:
                        executable: [git]
                        args: ["clone","https://github.com/9elements/contest-job-assets.git", "/tmp/assets{{ .ID }}/"]
                        expect: ["Cloning into"]

                -   name: cmd
                    label: emulate coreboot
                    parameters:
                        executable: [sh]
                        args: ["qemuscript100.sh"]
                        dir: ["/tmp/assets{{ .ID }}/"]   
                        expect: ["All tests successful."]

Reporting:
    RunReporters:
        -   name: TargetSuccess
            parameters:
                SuccessExpression: "=100%"
